@model Tripeace.Application.Areas.Admin.ViewModels.Account.ListModel
@{
    ViewBag.Title = @Localizer["Title"];
    var dirAvatar = "~" + ServerInfo.PlayerAvatarDir;
}

<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">
            @Localizer["Accounts"]
        </h1>
    </div>
</div>
<input type="hidden" id="active-header" value="players" />

@Html.AntiForgeryToken()
@Html.ValidationSummary()

<div class="well container">
    <form asp-action="List">
        <!--// TODO: more filters -->

        <div id="filter-results" class="col-md-4 col-md-offset-8">
            <input asp-for="Query" class="search" placeholder="@Localizer["TypeYourSearch"]" />
            <button type="submit" class="btn btn-sm"><i class="fa fa-search"></i>&thinsp;&thinsp;@Localizer["Search"]&thinsp;&thinsp;</button>
        </div>
    </form>
</div>

<br />
<br />

<div class="container">
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>@Localizer["Image"]</th>
                <th>@Localizer["AccountName"]</th>
                <th>@Localizer["Email"]</th>
                <th>@Localizer["Characters"]</th>
                <th>@Localizer["Role"]</th>
                <th>@Localizer["Action"]</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var account in Model.Data.Accounts)
        {
                <tr>
                    <td>//TODO</td>
                    <td>@account.AccountName</td>
                    <td>@account.Email</td>
                    <td style="white-space:pre;">@String.Join("\r\n", account.Characters)</td>
                    <td>@account.Role</td>
                    <td>

                        <text>
                            <table>
                                <tr>
                                    <td>
                                        <a class="btn btn-sm btn-default" href="@Url.Action("Edit", new {@id = @account.Id})">
                                            <i class="fa fa-pencil"></i>&thinsp;&thinsp;@Localizer["Edit"]
                                        </a>
                                    </td>
                                    <td>
                                        @if (account.IsLocked)
                                        {
                                            <a class="btn btn-sm btn-warning" href="@Url.Action("Unlock", new {@id = @account.Id})">
                                                <i class="fa fa-warning"></i>&thinsp;&thinsp;@Localizer["Unlock"]
                                            </a>
                                        }
                                        else
                                        {
                                            <a class="btn btn-sm btn-warning" href="@Url.Action("Lock", new {@id = @account.Id})">
                                                <i class="fa fa-warning"></i>&thinsp;&thinsp;@Localizer["Lock"]
                                            </a>
                                        }
                                    </td>
                                    <td>
                                        <a class="btn btn-sm btn-danger" href="@Url.Action("Delete", new {@id = @account.Id})">
                                            <i class="fa fa-times"></i>&thinsp;&thinsp;@Localizer["Delete"]
                                        </a>
                                    </td>
                                </tr>
                            </table>
                        </text>                    
                    </td>
                </tr>            
            }
        </tbody>
    </table>
</div>
<div class="container pagination-container">
    <cs-pager cs-paging-info="@Model.Paging"
                cs-pagenumber-param="pageNumber"
                asp-area="Admin"
                asp-controller="Account"
                asp-action="List"
                asp-route-query="@Model.Query">
    </cs-pager>
</div>
